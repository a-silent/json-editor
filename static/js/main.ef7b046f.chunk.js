(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){e.exports=n.p+"static/media/404.d0d45cd1.png"},106:function(e,t,n){e.exports=n(193)},192:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setValue",function(){return C}),n.d(a,"setError",function(){return V}),n.d(a,"resetError",function(){return w}),n.d(a,"resetState",function(){return x}),n.d(a,"getValueByHash",function(){return B}),n.d(a,"setValueByHash",function(){return H});var r=n(0),l=n.n(r),c=n(31),o=n.n(c),s=n(8),u=n(200),i=n(59).createBrowserHistory({basename:"/json-editor"}),m=n(3),p=n(9),h=n(10),b=n(12),f=n(11),E=n(13),j=n(199),d=n(196),g=n(198),y=n(5),_=n(195),O=n(33),v=n.n(O),k=n(62),S=n(63),N=n.n(S),T=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)e+=t[Math.round(Math.random()*(t.length-1))];return e},C=function(e){return{type:"SET_VALUE",payload:e}},V=function(e){return{type:"SET_ERROR",error:e}},w=function(e){return{type:"RESET_ERROR"}},x=function(){return{type:"RESET_STATE"}},I=function(e){return{type:"HASH_REQUEST",payload:e}},R=function(e){return{type:"HASH_REQUEST_SUCCES",payload:e}},A=function(e){return{type:"HASH_REQUEST_FAIL",error:e}},B=function(e){return function(){var t=Object(k.a)(v.a.mark(function t(n){var a,r,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(I()),t.prev=1,t.next=4,N()({method:"GET",url:"https://immense-dusk-23974.herokuapp.com/json-server"});case 4:if(a=t.sent,r=a.data,0!==(l=r.filter(function(t){return t.hash===e})).length){t.next=9;break}throw new Error("no hash in database");case 9:localStorage.setItem("json",JSON.stringify(l[0].json,null,4)),n(R(l[0])),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(A(t.t0));case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(k.a)(v.a.mark(function t(n){var a,r,l,c;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(I()),t.prev=1,t.next=4,N()({method:"POST",url:"https://immense-dusk-23974.herokuapp.com/json-server",data:{hash:T(),json:e}});case 4:a=t.sent,r=a.data,l=r.hash,c=r.json,i.push("/".concat(l)),n(R({json:c,hash:l})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(A(t.t0));case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()},F=n(197),L=(n(135),function(e){var t=e.loading,n=e.click,a=e.text,r=e.type,c=e.disabled,o=e.htmlType;return l.a.createElement(F.a,{disabled:c,type:r,loading:t,onClick:n,htmlType:o},a)}),U=n(99),J=n.n(U),D=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).saveBtnClick=function(){var e=n.props.setValueByHash,t=localStorage.getItem("json");if(t)return e(JSON.parse(t))},n.resetBtnClick=function(){n.props.resetState(),localStorage.removeItem("json")},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.error,a=e.resetError;return l.a.createElement("header",{className:"header"},l.a.createElement(_.a,{to:"/",onClick:a},l.a.createElement("img",{className:"header__logo",src:J.a,alt:"logo"})),l.a.createElement("div",{className:"header__control-panel"},l.a.createElement(L,{htmlType:"button",type:"primary",disabled:n,loading:t,click:this.saveBtnClick,text:"Save"}),l.a.createElement(L,{htmlType:"button",type:"primary",disabled:t||n,click:this.resetBtnClick,text:"Reset"})))}}]),t}(r.Component),Q=Object(g.a)(Object(s.b)(function(e){return{isFetching:e.jsonValue.isFetching,error:e.jsonValue.error}},function(e){return Object(y.b)(Object(m.a)({},a),e)})(D)),P=n(102),K=n.n(P),M=(n(189),n(191),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=n.props.setValue;localStorage.setItem("json",e),t(e)},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"editor-block"},l.a.createElement(K.a,{mode:"json",theme:"monokai",width:"100%",onChange:this.onChange,onLoad:this.onLoad,value:this.props.json,editorProps:{$blockScrolling:1/0}}))}}]),t}(r.Component)),G=Object(s.b)(function(e){return{json:e.jsonValue.json}},function(e){return Object(y.b)(Object(m.a)({},a),e)})(M),Z=function(e){var t=e.split(":");return"".concat(t[0],":").concat(t[1])},q=function e(t,n,a){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=a.changeInput,s=a.visibilityListButton;switch(r=t,Object.prototype.toString.call(r)){case"[object Object]":return n?l.a.createElement("li",{className:"result-block__list__item",key:c},"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement(l.a.Fragment,null,"{",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-")),l.a.createElement("ul",{className:"result-block__list__object"},Object.keys(t).map(function(n,r){return e(t[n],n,a,r)})),"}"):l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"{"),l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-")),l.a.createElement("ul",{className:"result-block__list__object"},Object.keys(t).map(function(n,r){return e(t[n],n,a,r)})),"}");case"[object Array]":return n?l.a.createElement("li",{className:"result-block__list__item",key:c},"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0["):"[",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-"),l.a.createElement("ul",{className:"result-block__list__array"},t.map(function(t,n,r){return e(t,!!r,a,n)})),"]"):l.a.createElement(l.a.Fragment,null,"[",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-"),l.a.createElement("ul",{className:"result-block__list__array"},t.map(function(t,n,r){return e(t,!!r,a,n)})),"]");case"[object String]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",function(e){try{return new Date(e).toISOString()===e}catch(t){return!1}}(t)?l.a.createElement("input",{type:"datetime-local",value:Z(t),onChange:o}):/#[a-f0-9]{6}\b/gi.test(t)?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"color",value:t,onChange:o}),l.a.createElement("span",null,"\xa0",t)):l.a.createElement("input",{type:"text",value:t,onChange:o})));case"[object Number]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement("input",{type:"number",value:t,onChange:o})));case"[object Boolean]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement("input",{type:"checkbox",checked:t,onChange:o}),l.a.createElement("span",null,t.toString())));default:return null}},z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).result=[],n.searchIndex=function(){var e=0;return function t(n){return n.previousElementSibling?(e++,t(n.previousElementSibling)):e}},n.checkElemInChildren=function(e,t,n){return Array.from(e).some(function(e){return e[t]===n})},n.createArrayOfKeys=function(e){if("DIV"!==e.tagName){if(n.checkElemInChildren(e.children,"className","label-name")){var t=!0,a=!1,r=void 0;try{for(var l,c=e.children[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var o=l.value;"label-name"===o.className&&n.result.unshift(o.innerText.split(":")[0])}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}}"INPUT"!==e.tagName||n.checkElemInChildren(e.parentElement.children,"className","label-name")||n.result.unshift(n.searchIndex()(e.parentElement.parentElement)),"LI"===e.tagName&&"result-block__list__array"===e.parentElement.className&&n.checkElemInChildren(e.children,"tagName","UL")&&n.result.unshift(n.searchIndex()(e)),n.createArrayOfKeys(e.parentElement)}},n.changeValueOfObject=function(e,t,a){var r=n.props.setValue;if(e[e.length-1]!==a){var l=JSON.parse(n.props.json);e.reduce(function(e,n,r,l){return r===l.length-1&&(a?(e[a]=e[n],delete e[n]):e[n]=t),e[n]},l),localStorage.setItem("json",JSON.stringify(l,null,4)),r(JSON.stringify(l,null,4))}},n.changeInput=function(e){n.result=[],n.createArrayOfKeys(e.target),e.target.type,n.changeValueOfObject(n.result,e.target.value),"number"===e.target.type&&n.changeValueOfObject(n.result,Number(e.target.value)),"checkbox"===e.target.type&&n.changeValueOfObject(n.result,e.target.checked),"datetime-local"===e.target.type&&n.changeValueOfObject(n.result,e.target.value&&"".concat(e.target.value,":00.000Z"))},n.changeLabel=function(e){"label-name"===e.target.className&&(n.result=[],n.createArrayOfKeys(e.target),e.preventDefault(),e.target.spellcheck=!1,e.target.contentEditable=!0,e.target.focus(),e.target.onblur=function(e){n.changeValueOfObject(n.result,null,e.target.innerText.split(":")[0])},e.target.onkeydown=function(e){13===e.which&&(e.preventDefault(),e.target.blur())})},n.visibilityListButton=function(e){var t=e.target.parentElement;t.getElementsByTagName("ul")[0].hidden=!t.getElementsByTagName("ul")[0].hidden,t.getElementsByTagName("ul")[0].hidden?e.target.innerText="+":e.target.innerText="-"},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"result-block",onClick:this.changeLabel},function(e){try{return JSON.parse(e),!0}catch(t){return!1}}(this.props.json)?q(JSON.parse(this.props.json),null,{changeInput:this.changeInput,visibilityListButton:this.visibilityListButton}):""===this.props.json?l.a.createElement("p",{className:"result-block__start-work"},"The editor is ready for work. Please enter your JSON file for start working."):l.a.createElement("p",{className:"result-block__error"},"JSON parse error..."))}}]),t}(r.Component),W=Object(s.b)(function(e){return{json:e.jsonValue.json}},function(e){return Object(y.b)(Object(m.a)({},a),e)})(z),X=n(103),Y=n.n(X),$=function(e){return l.a.createElement("div",{className:"error-block"},l.a.createElement("img",{src:Y.a,alt:"404"}),l.a.createElement("h2",{className:"error-block__header"},"Page not found"))},ee=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.hash&&(0,this.props.getValueByHash)(e.hash)}},{key:"componentDidUpdate",value:function(){var e=localStorage.getItem("json");e&&(0,this.props.setValue)(e)}},{key:"render",value:function(){return this.props.error?l.a.createElement($,null):l.a.createElement("div",{className:"main-block"},l.a.createElement(W,null),l.a.createElement(G,null))}}]),t}(r.Component),te=Object(s.b)(function(e){return{json:e.jsonValue.json,error:e.jsonValue.error,hash:e.jsonValue.hash}},function(e){return Object(y.b)(Object(m.a)({},a),e)})(ee),ne=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("json");e&&(0,this.props.setValue)(e)}},{key:"render",value:function(){var e=this.props,t=e.setError,n=e.resetError;return l.a.createElement("div",{className:"wrapper"},l.a.createElement(Q,{resetState:n}),l.a.createElement(j.a,null,l.a.createElement(d.a,{exact:!0,path:"/",component:te}),l.a.createElement(d.a,{exact:!0,path:"/:hash",component:te}),l.a.createElement(d.a,{render:function(){return t("page not found"),l.a.createElement($,null)}})))}}]),t}(r.Component),ae=Object(g.a)(Object(s.b)(null,function(e){return Object(y.b)(Object(m.a)({},a),e)})(ne)),re=n(104),le={jsonValue:{json:"",isFetching:!1,error:!1,hash:null}},ce=Object(y.c)({jsonValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le.jsonValue,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.error;switch(n){case"SET_VALUE":return Object(m.a)({},e,{json:a});case"RESET_STATE":return Object(m.a)({},le.jsonValue);case"SET_ERROR":return Object(m.a)({},le.jsonValue,{error:r});case"RESET_ERROR":return Object(m.a)({},e,{error:null});case"HASH_REQUEST":return Object(m.a)({},e,{isFetching:!0,error:null,hash:null});case"HASH_REQUEST_SUCCES":var l=a.json,c=a.hash;return l=JSON.stringify(l,null,4),Object(m.a)({},e,{isFetching:!1,json:l,error:null,hash:c});case"HASH_REQUEST_FAIL":return Object(m.a)({},e,{isFetching:!1,error:r,json:"",hash:null});default:return e}}}),oe=[re.a],se=Object(y.d)(ce,le,y.a.apply(void 0,oe));n(192);o.a.render(l.a.createElement(s.a,{store:se},l.a.createElement(u.a,{history:i,basename:"/json-editor"},l.a.createElement(ae,null))),document.getElementById("root"))},99:function(e,t,n){e.exports=n.p+"static/media/json-logo.d5619bd0.png"}},[[106,1,2]]]);
//# sourceMappingURL=main.ef7b046f.chunk.js.map