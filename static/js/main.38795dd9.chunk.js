(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){e.exports=n.p+"static/media/json-logo.d5619bd0.png"},107:function(e,t,n){e.exports=n.p+"static/media/404.d0d45cd1.png"},110:function(e,t,n){e.exports=n(200)},199:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setValue",function(){return V}),n.d(a,"setError",function(){return w}),n.d(a,"resetError",function(){return x}),n.d(a,"resetState",function(){return I}),n.d(a,"getValueByHash",function(){return H}),n.d(a,"setValueByHash",function(){return F});var r=n(0),l=n.n(r),c=n(31),o=n.n(c),s=n(8),u=n(205),i=n(95),m=n.n(i)()({basename:"/json-editor"}),h=n(4),p=n(9),b=n(10),f=n(12),E=n(11),g=n(13),j=n(207),d=n(203),y=n(206),_=n(5),O=n(202),v=n(33),k=n.n(v),S=n(64),N=n(65),T=n.n(N),C=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)e+=t[Math.round(Math.random()*(t.length-1))];return e},V=function(e){return{type:"SET_VALUE",payload:e}},w=function(e){return{type:"SET_ERROR",error:e}},x=function(e){return{type:"RESET_ERROR"}},I=function(){return{type:"RESET_STATE"}},R=function(e){return{type:"HASH_REQUEST",payload:e}},A=function(e){return{type:"HASH_REQUEST_SUCCES",payload:e}},B=function(e){return{type:"HASH_REQUEST_FAIL",error:e}},H=function(e){return function(){var t=Object(S.a)(k.a.mark(function t(n){var a,r,l;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,T()({method:"GET",url:"http://localhost:3005/data"});case 4:if(a=t.sent,r=a.data,0!==(l=r.filter(function(t){return t.hash===e})).length){t.next=9;break}throw new Error("no hash in database");case 9:localStorage.setItem("json",JSON.stringify(l[0].json,null,4)),n(A(l[0])),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(B(t.t0));case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(S.a)(k.a.mark(function t(n){var a,r;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,T()({method:"POST",url:"http://localhost:3005/data",data:{hash:C(),json:e}});case 4:a=t.sent,r=a.data,m.push("/".concat(r.hash)),n(A({json:r.json,hash:r.hash})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(B(t.t0));case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},L=n(204),U=(n(142),function(e){console.log(e);var t=e.loading,n=e.click,a=e.text,r=e.type,c=e.disabled,o=e.htmlType;return l.a.createElement(L.a,{disabled:c,type:r,loading:t,onClick:n,htmlType:o},a)}),J=n(103),D=n.n(J),Q=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).saveBtnClick=function(){console.log("SAVE");var e=n.props.setValueByHash,t=localStorage.getItem("json");if(t)return e(JSON.parse(t))},n.resetBtnClick=function(){console.log("RESET"),n.props.resetState(),localStorage.removeItem("json")},n}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.error,a=e.resetError;return l.a.createElement("header",{className:"header"},l.a.createElement(O.a,{to:"/",onClick:a},l.a.createElement("img",{className:"header__logo",src:D.a,alt:"logo"})),l.a.createElement("div",{className:"header__control-panel"},l.a.createElement(U,{htmlType:"htmlType",type:"primary",disabled:n,loading:t,click:this.saveBtnClick,text:"Save"}),l.a.createElement(U,{htmlType:"htmlType",type:"primary",disabled:t||n,click:this.resetBtnClick,text:"Reset"})))}}]),t}(r.Component),P=Object(y.a)(Object(s.b)(function(e){return{isFetching:e.jsonValue.isFetching,error:e.jsonValue.error}},function(e){return Object(_.b)(Object(h.a)({},a),e)})(Q)),K=n(106),M=n.n(K),G=(n(196),n(198),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=n.props.setValue;localStorage.setItem("json",e),t(e)},n}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"editor-block"},l.a.createElement(M.a,{mode:"json",theme:"monokai",width:"100%",onChange:this.onChange,onLoad:this.onLoad,value:this.props.json,editorProps:{$blockScrolling:1/0}}))}}]),t}(r.Component)),Z=Object(s.b)(function(e){return{json:e.jsonValue.json}},function(e){return Object(_.b)(Object(h.a)({},a),e)})(G),q=function(e){var t=e.split(":");return"".concat(t[0],":").concat(t[1])},z=function e(t,n,a){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=a.changeInput,s=a.visibilityListButton;switch(r=t,Object.prototype.toString.call(r)){case"[object Object]":return n?l.a.createElement("li",{className:"result-block__list__item",key:c},"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement(l.a.Fragment,null,"{",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-")),l.a.createElement("ul",{className:"result-block__list__object"},Object.keys(t).map(function(n,r){return e(t[n],n,a,r)})),"}"):l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"{"),l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-")),l.a.createElement("ul",{className:"result-block__list__object"},Object.keys(t).map(function(n,r){return e(t[n],n,a,r)})),"}");case"[object Array]":return n?l.a.createElement("li",{className:"result-block__list__item",key:c},"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0["):"[",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-"),l.a.createElement("ul",{className:"result-block__list__array"},t.map(function(t,n,r){return e(t,!!r,a,n)})),"]"):l.a.createElement(l.a.Fragment,null,"[",l.a.createElement("button",{className:"result-block__list__item__visibility-button",onClick:s},"-"),l.a.createElement("ul",{className:"result-block__list__array"},t.map(function(t,n,r){return e(t,!!r,a,n)})),"]");case"[object String]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",function(e){try{return new Date(e).toISOString()===e}catch(t){return!1}}(t)?l.a.createElement("input",{type:"datetime-local",value:q(t),onChange:o}):/#[a-f0-9]{6}\b/gi.test(t)?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"color",value:t,onChange:o}),l.a.createElement("span",null,"\xa0",t)):l.a.createElement("input",{type:"text",value:t,onChange:o})));case"[object Number]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement("input",{type:"number",value:t,onChange:o})));case"[object Boolean]":return l.a.createElement("li",{className:"result-block__list__item",key:c},l.a.createElement("label",null,"boolean"!==typeof n?l.a.createElement("span",{className:"label-name"},n,":\xa0"):"",l.a.createElement("input",{type:"checkbox",checked:t,onChange:o}),l.a.createElement("span",null,t.toString())));default:return null}},W=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).result=[],n.searchIndex=function(){var e=0;return function t(n){return n.previousElementSibling?(e++,t(n.previousElementSibling)):e}},n.checkElemInChildren=function(e,t,n){return Array.from(e).some(function(e){return e[t]===n})},n.createArrayOfKeys=function(e){if("DIV"!==e.tagName){if(n.checkElemInChildren(e.children,"className","label-name")){var t=!0,a=!1,r=void 0;try{for(var l,c=e.children[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var o=l.value;"label-name"===o.className&&n.result.unshift(o.innerText.split(":")[0])}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}}"INPUT"!==e.tagName||n.checkElemInChildren(e.parentElement.children,"className","label-name")||n.result.unshift(n.searchIndex()(e.parentElement.parentElement)),"LI"===e.tagName&&"result-block__list__array"===e.parentElement.className&&n.checkElemInChildren(e.children,"tagName","UL")&&n.result.unshift(n.searchIndex()(e)),n.createArrayOfKeys(e.parentElement)}},n.changeValueOfObject=function(e,t,a){var r=n.props.setValue;if(e[e.length-1]!==a){var l=JSON.parse(n.props.json);e.reduce(function(e,n,r,l){return r===l.length-1&&(a?(e[a]=e[n],delete e[n]):e[n]=t),e[n]},l),localStorage.setItem("json",JSON.stringify(l,null,4)),r(JSON.stringify(l,null,4))}},n.changeInput=function(e){n.result=[],n.createArrayOfKeys(e.target),e.target.type,n.changeValueOfObject(n.result,e.target.value),"number"===e.target.type&&n.changeValueOfObject(n.result,Number(e.target.value)),"checkbox"===e.target.type&&n.changeValueOfObject(n.result,e.target.checked),"datetime-local"===e.target.type&&n.changeValueOfObject(n.result,e.target.value&&"".concat(e.target.value,":00.000Z"))},n.changeLabel=function(e){"label-name"===e.target.className&&(n.result=[],n.createArrayOfKeys(e.target),e.preventDefault(),e.target.spellcheck=!1,e.target.contentEditable=!0,e.target.focus(),e.target.onblur=function(e){n.changeValueOfObject(n.result,null,e.target.innerText.split(":")[0])},e.target.onkeydown=function(e){13===e.which&&(e.preventDefault(),e.target.blur())})},n.visibilityListButton=function(e){var t=e.target.parentElement;t.getElementsByTagName("ul")[0].hidden=!t.getElementsByTagName("ul")[0].hidden,t.getElementsByTagName("ul")[0].hidden?e.target.innerText="+":e.target.innerText="-"},n}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"result-block",onClick:this.changeLabel},function(e){try{return JSON.parse(e),!0}catch(t){return!1}}(this.props.json)?z(JSON.parse(this.props.json),null,{changeInput:this.changeInput,visibilityListButton:this.visibilityListButton}):""===this.props.json?l.a.createElement("p",{className:"result-block__start-work"},"The editor is ready for work. Please enter your JSON file for start working."):l.a.createElement("p",{className:"result-block__error"},"JSON parse error..."))}}]),t}(r.Component),X=Object(s.b)(function(e){return{json:e.jsonValue.json}},function(e){return Object(_.b)(Object(h.a)({},a),e)})(W),Y=n(107),$=n.n(Y),ee=function(e){return l.a.createElement("div",{className:"error-block"},l.a.createElement("img",{src:$.a,alt:"404"}),l.a.createElement("h2",{className:"error-block__header"},"Page not found"))},te=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.hash&&(0,this.props.getValueByHash)(e.hash)}},{key:"componentDidUpdate",value:function(){var e=localStorage.getItem("json");e&&(0,this.props.setValue)(e)}},{key:"render",value:function(){return this.props.error?l.a.createElement(ee,null):l.a.createElement("div",{className:"main-block"},l.a.createElement(X,null),l.a.createElement(Z,null))}}]),t}(r.Component),ne=Object(s.b)(function(e){return{json:e.jsonValue.json,error:e.jsonValue.error,hash:e.jsonValue.hash}},function(e){return Object(_.b)(Object(h.a)({},a),e)})(te),ae=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("json");e&&(0,this.props.setValue)(e)}},{key:"render",value:function(){var e=this.props,t=e.setError,n=e.resetError;return l.a.createElement("div",{className:"wrapper"},l.a.createElement(P,{resetState:n}),l.a.createElement(j.a,null,l.a.createElement(d.a,{exact:!0,path:"/",component:ne}),l.a.createElement(d.a,{exact:!0,path:"/:hash",component:ne}),l.a.createElement(d.a,{render:function(){return t("page not found"),l.a.createElement(ee,null)}})))}}]),t}(r.Component),re=Object(y.a)(Object(s.b)(null,function(e){return Object(_.b)(Object(h.a)({},a),e)})(ae)),le=n(108),ce={jsonValue:{json:"",isFetching:!1,error:!1,hash:null}},oe=Object(_.c)({jsonValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.jsonValue,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=t.error;switch(n){case"SET_VALUE":return Object(h.a)({},e,{json:a});case"RESET_STATE":return Object(h.a)({},ce.jsonValue);case"SET_ERROR":return Object(h.a)({},ce.jsonValue,{error:r});case"RESET_ERROR":return Object(h.a)({},e,{error:null});case"HASH_REQUEST":return Object(h.a)({},e,{isFetching:!0,error:null,hash:null});case"HASH_REQUEST_SUCCES":var l=a.json,c=a.hash;return l=JSON.stringify(l,null,4),Object(h.a)({},e,{isFetching:!1,json:l,error:null,hash:c});case"HASH_REQUEST_FAIL":return Object(h.a)({},e,{isFetching:!1,error:r,json:"",hash:null});default:return e}}}),se=[le.a],ue=Object(_.d)(oe,ce,_.a.apply(void 0,se));n(199);ue.subscribe(function(){return console.log("state: ",ue.getState())}),o.a.render(l.a.createElement(s.a,{store:ue},l.a.createElement(u.a,{history:m,basename:"/json-editor"},l.a.createElement(re,null))),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.38795dd9.chunk.js.map